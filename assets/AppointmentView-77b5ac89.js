import{p as S,b as De,m as be,aE as Ce,d as xe,L as Se,aF as we,e as Me,a as Ae,f as Ye,g as w,l as Ie,h as X,t as ie,i as Ne,aG as We,j as Be,Q as Te,aH as Oe,k as $e,u as I,c as a,o as V,J as x,aI as je,S as He,r as L,aJ as Re,aK as $,D as Y,aL as H,aM as Ee,x as N,s as K,aa as O,aN as de,H as ce,G as C,v as ue,A as ve,at as me,aO as Le,au as E,N as Ue,z,a5 as R,aP as Fe,_ as ze,X as Je,a0 as B,a1 as J,a6 as ke,a2 as _,a4 as Ge,ai as Qe,a7 as Z,ag as Ke,ah as Xe,a9 as ee,ac as qe,aQ as Ze,af as G,aj as et,ad as tt,aR as at}from"./index-7d7c6a37.js";import"./index.esm-195823e1.js";import{V as nt}from"./VContainer-5df97b43.js";import{V as Q}from"./VRow-d5a19ae7.js";import{V as T}from"./VCol-9d228c00.js";import{V as lt}from"./VChip-427a8a98.js";import"./VSlideGroup-b31b55f6.js";const fe=S({color:String,...De(),...be(),...Ce(),...xe(),...Se(),...we(),...Me(),...Ae(),...Ye()},"VSheet"),te=w()({name:"VSheet",props:fe(),setup(e,t){let{slots:u}=t;const{themeClasses:n}=Ie(e),{backgroundColorClasses:l,backgroundColorStyles:k}=X(ie(e,"color")),{borderClasses:c}=Ne(e),{dimensionStyles:i}=We(e),{elevationClasses:d}=Be(e),{locationStyles:r}=Te(e),{positionClasses:s}=Oe(e),{roundedClasses:P}=$e(e);return I(()=>a(e.tag,{class:["v-sheet",n.value,l.value,c.value,d.value,s.value,P.value,e.class],style:[k.value,i.value,r.value,e.style]},u)),{}}});const he=S({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ae=w()({name:"VDatePickerControls",props:he(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:u}=t;const n=V(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),l=V(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),k=V(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),c=V(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function i(){u("click:prev")}function d(){u("click:next")}function r(){u("click:year")}function s(){u("click:month")}return I(()=>a("div",{class:["v-date-picker-controls"]},[a(x,{class:"v-date-picker-controls__month-btn",disabled:n.value,text:e.text,variant:"text",rounded:!0,onClick:s},null),a(x,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:l.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:r},null),a(je,{key:"mode-spacer"},null),a("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[a(x,{disabled:k.value,icon:e.prevIcon,variant:"text",onClick:i},null),a(x,{disabled:c.value,icon:e.nextIcon,variant:"text",onClick:d},null)])])),{}}});const st=S({appendIcon:String,color:String,header:String,transition:String,onClick:Re()},"VDatePickerHeader"),ne=w()({name:"VDatePickerHeader",props:st(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:u,slots:n}=t;const{backgroundColorClasses:l,backgroundColorStyles:k}=X(e,"color");function c(){u("click")}function i(){u("click:append")}return I(()=>{const d=!!(n.default||e.header),r=!!(n.append||e.appendIcon);return a("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},l.value],style:k.value,onClick:c},[n.prepend&&a("div",{key:"prepend",class:"v-date-picker-header__prepend"},[n.prepend()]),d&&a(He,{key:"content",name:e.transition},{default:()=>{var s;return[a("div",{key:e.header,class:"v-date-picker-header__content"},[((s=n.default)==null?void 0:s.call(n))??e.header])]}}),r&&a("div",{class:"v-date-picker-header__append"},[n.append?a(L,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var s;return[(s=n.append)==null?void 0:s.call(n)]}}):a(x,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}});const rt=S({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function ot(e){const t=$(),u=Y(e,"modelValue",[],v=>H(v)),n=V(()=>e.displayValue?t.date(e.displayValue):u.value.length>0?t.date(u.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),l=Y(e,"year",void 0,v=>{const f=v!=null?Number(v):t.getYear(n.value);return t.startOfYear(t.setYear(t.date(),f))},v=>t.getYear(v)),k=Y(e,"month",void 0,v=>{const f=v!=null?Number(v):t.getMonth(n.value),m=t.setYear(t.startOfMonth(t.date()),t.getYear(l.value));return t.setMonth(m,f)},v=>t.getMonth(v)),c=V(()=>{const v=t.getWeekArray(k.value),f=v.flat(),m=6*7;if(f.length<m){const o=f[f.length-1];let h=[];for(let g=1;g<=m-f.length;g++)h.push(t.addDays(o,g)),g%7===0&&(v.push(h),h=[])}return v});function i(v,f){return v.filter(m=>e.weekdays.includes(t.toJsDate(m).getDay())).map((m,o)=>{const h=t.toISO(m),g=!t.isSameMonth(m,k.value),b=t.isSameDay(m,t.startOfMonth(k.value)),M=t.isSameDay(m,t.endOfMonth(k.value)),W=t.isSameDay(m,k.value);return{date:m,isoDate:h,formatted:t.format(m,"keyboardDate"),year:t.getYear(m),month:t.getMonth(m),isDisabled:P(m),isWeekStart:o%7===0,isWeekEnd:o%7===6,isToday:t.isSameDay(m,f),isAdjacent:g,isHidden:g&&!e.showAdjacentMonths,isStart:b,isSelected:u.value.some(j=>t.isSameDay(m,j)),isEnd:M,isSame:W,localized:t.format(m,"dayOfMonth")}})}const d=V(()=>{const v=t.startOfWeek(u.value),f=[];for(let h=0;h<=6;h++)f.push(t.addDays(v,h));const m=f,o=t.date();return i(m,o)}),r=V(()=>{const v=c.value.flat(),f=t.date();return i(v,f)}),s=V(()=>c.value.map(v=>v.length?Ee(t,v[0]):null));function P(v){if(e.disabled)return!0;const f=t.date(v);return e.min&&t.isAfter(t.date(e.min),f)||e.max&&t.isAfter(f,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(m=>t.isSameDay(t.date(m),f)):typeof e.allowedDates=="function"?!e.allowedDates(f):!1}return{displayValue:n,daysInMonth:r,daysInWeek:d,genDays:i,model:u,weeksInMonth:c,weekNumbers:s}}const ye=S({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...rt()},"VDatePickerMonth"),le=w()({name:"VDatePickerMonth",props:ye(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:u,slots:n}=t;const l=N(),{daysInMonth:k,model:c,weekNumbers:i}=ot(e),d=$(),r=K(),s=K(),P=V(()=>{const o=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return c.value.length>=o});function v(o){const h=d.startOfDay(o);if(!r.value)r.value=h,c.value=[r.value];else if(s.value)r.value=o,s.value=void 0,c.value=[r.value];else{if(d.isSameDay(o,r.value)){r.value=void 0,c.value=[];return}else d.isBefore(o,r.value)?(s.value=r.value,r.value=h):s.value=h;const g=d.getDiff(s.value,r.value),b=[r.value];for(let M=1;M<g;M++){const W=d.addDays(r.value,M);b.push(W)}b.push(s.value),c.value=b}}function f(o){const h=c.value.findIndex(g=>d.isSameDay(g,o));if(h===-1)c.value=[...c.value,o];else{const g=[...c.value];g.splice(h,1),c.value=g}}function m(o){e.multiple==="range"?v(o):e.multiple?f(o):c.value=[o]}return()=>a("div",{class:"v-date-picker-month"},[e.showWeek&&a("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&a("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[O(" ")]),i.value.map(o=>a("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[o]))]),a("div",{ref:l,class:"v-date-picker-month__days"},[!e.hideWeekdays&&d.getWeekdays().map(o=>a("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[o])),k.value.map((o,h)=>{const g={props:{onClick:()=>m(o.date)},item:o,i:h};return P.value&&!o.isSelected&&(o.isDisabled=!0),a("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":o.isAdjacent,"v-date-picker-month__day--hide-adjacent":o.isHidden,"v-date-picker-month__day--selected":o.isSelected,"v-date-picker-month__day--week-end":o.isWeekEnd,"v-date-picker-month__day--week-start":o.isWeekStart}],"data-v-date":o.isDisabled?void 0:o.isoDate},[(e.showAdjacentMonths||!o.isAdjacent)&&a(L,{defaults:{VBtn:{color:(o.isSelected||o.isToday)&&!o.isDisabled?e.color:void 0,disabled:o.isDisabled,icon:!0,ripple:!1,text:o.localized,variant:o.isDisabled?"text":o.isToday&&!o.isSelected?"outlined":"flat",onClick:()=>m(o.date)}}},{default:()=>{var b;return[((b=n.day)==null?void 0:b.call(n,g))??a(x,g.props,null)]}})])})])])}});const ge=S({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),se=w()({name:"VDatePickerMonths",props:ge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:u}=t;const n=$(),l=Y(e,"modelValue"),k=V(()=>{let c=n.startOfYear(n.date());return de(12).map(i=>{const d=n.format(c,"monthShort");return c=n.getNextMonth(c),{text:d,value:i}})});return ce(()=>{l.value=l.value??n.getMonth(n.date())}),I(()=>a("div",{class:"v-date-picker-months",style:{height:ue(e.height)}},[a("div",{class:"v-date-picker-months__content"},[k.value.map((c,i)=>{var s;const d={active:l.value===i,color:l.value===i?e.color:void 0,rounded:!0,text:c.text,variant:l.value===c.value?"flat":"text",onClick:()=>r(i)};function r(P){l.value=P}return((s=u.month)==null?void 0:s.call(u,{month:c,i,props:d}))??a(x,C({key:"month"},d,{onClick:()=>r(i)}),null)})])])),{}}});const Ve=S({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),re=w()({name:"VDatePickerYears",props:Ve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:u}=t;const n=$(),l=Y(e,"modelValue"),k=V(()=>{const i=n.getYear(n.date());let d=i-100,r=i+52;e.min&&(d=n.getYear(n.date(e.min))),e.max&&(r=n.getYear(n.date(e.max)));let s=n.startOfYear(n.date());return s=n.setYear(s,d),de(r-d+1,d).map(P=>{const v=n.format(s,"year");return s=n.setYear(s,n.getYear(s)+1),{text:v,value:P}})});ce(()=>{l.value=l.value??n.getYear(n.date())});const c=N();return ve(async()=>{var i;await me(),(i=c.value)==null||i.$el.scrollIntoView({block:"center"})}),I(()=>a("div",{class:"v-date-picker-years",style:{height:ue(e.height)}},[a("div",{class:"v-date-picker-years__content"},[k.value.map((i,d)=>{var s;const r={ref:l.value===i.value?c:void 0,active:l.value===i.value,color:l.value===i.value?e.color:void 0,rounded:!0,text:i.text,variant:l.value===i.value?"flat":"text",onClick:()=>l.value=i.value};return((s=u.year)==null?void 0:s.call(u,{year:i,i:d,props:r}))??a(x,C({key:"month"},r),null)})])])),{}}});const it=Le("v-picker-title"),Pe=S({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...fe()},"VPicker"),oe=w()({name:"VPicker",props:Pe(),setup(e,t){let{slots:u}=t;const{backgroundColorClasses:n,backgroundColorStyles:l}=X(ie(e,"color"));return I(()=>{const k=te.filterProps(e),c=!!(e.title||u.title);return a(te,C(k,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!u.actions},e.class],style:e.style}),{default:()=>{var i;return[!e.hideHeader&&a("div",{key:"header",class:[n.value],style:[l.value]},[c&&a(it,{key:"picker-title"},{default:()=>{var d;return[((d=u.title)==null?void 0:d.call(u))??e.title]}}),u.header&&a("div",{class:"v-picker__header"},[u.header()])]),a("div",{class:"v-picker__body"},[(i=u.default)==null?void 0:i.call(u)]),u.actions&&a(L,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[a("div",{class:"v-picker__actions"},[u.actions()])]})]}})}),{}}}),dt=S({header:{type:String,default:"$vuetify.datePicker.header"},...he(),...ye(),...E(ge(),["modelValue"]),...E(Ve(),["modelValue"]),...Pe({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ct=w()({name:"VDatePicker",props:dt(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:u,slots:n}=t;const l=$(),{t:k}=Ue(),c=Y(e,"modelValue",void 0,y=>H(y),y=>e.multiple?y:y[0]),i=Y(e,"viewMode"),d=V(()=>{var D;const y=l.date((D=c.value)==null?void 0:D[0]);return y&&l.isValid(y)?y:l.date()}),r=N(Number(e.month??l.getMonth(l.startOfMonth(d.value)))),s=N(Number(e.year??l.getYear(l.startOfYear(l.setMonth(d.value,r.value))))),P=K(!1),v=V(()=>e.multiple&&c.value.length>1?k("$vuetify.datePicker.itemsSelected",c.value.length):c.value[0]&&l.isValid(c.value[0])?l.format(c.value[0],"normalDateWithWeekday"):k(e.header)),f=V(()=>l.format(l.date(new Date(s.value,r.value,1)),"monthAndYear")),m=V(()=>`date-picker-header${P.value?"-reverse":""}-transition`),o=V(()=>{const y=l.date(e.min);return e.min&&l.isValid(y)?y:null}),h=V(()=>{const y=l.date(e.max);return e.max&&l.isValid(y)?y:null}),g=V(()=>{if(e.disabled)return!0;const y=[];if(i.value!=="month")y.push("prev","next");else{let D=l.date();if(D=l.setYear(D,s.value),D=l.setMonth(D,r.value),o.value){const A=l.addDays(l.startOfMonth(D),-1);l.isAfter(o.value,A)&&y.push("prev")}if(h.value){const A=l.addDays(l.endOfMonth(D),1);l.isAfter(A,h.value)&&y.push("next")}}return y});function b(){r.value<11?r.value++:(s.value++,r.value=0)}function M(){r.value>0?r.value--:(s.value--,r.value=11)}function W(){i.value="month"}function j(){i.value=i.value==="months"?"month":"months"}function q(){i.value=i.value==="year"?"month":"year"}return z(r,()=>{i.value==="months"&&j(),u("update:month",r.value)}),z(s,()=>{i.value==="year"&&q(),u("update:year",s.value)}),z(c,(y,D)=>{const A=l.date(H(y)[0]),U=l.date(H(D)[0]);P.value=l.isBefore(A,U)}),I(()=>{const y=oe.filterProps(e),D=ae.filterProps(e),A=ne.filterProps(e),U=le.filterProps(e),_e=E(se.filterProps(e),["modelValue"]),pe=E(re.filterProps(e),["modelValue"]),F={header:v.value,transition:m.value};return a(oe,C(y,{class:["v-date-picker",`v-date-picker--${i.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var p;return((p=n.title)==null?void 0:p.call(n))??a("div",{class:"v-date-picker__title"},[k(e.title)])},header:()=>n.header?a(L,{defaults:{VDatePickerHeader:{...F}}},{default:()=>{var p;return[(p=n.header)==null?void 0:p.call(n,F)]}}):a(ne,C({key:"header"},A,F,{onClick:i.value!=="month"?W:void 0}),{...n,default:void 0}),default:()=>a(R,null,[a(ae,C(D,{disabled:g.value,text:f.value,"onClick:next":b,"onClick:prev":M,"onClick:month":j,"onClick:year":q}),null),a(Fe,{hideOnLeave:!0},{default:()=>[i.value==="months"?a(se,C({key:"date-picker-months"},_e,{modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,min:o.value,max:h.value}),null):i.value==="year"?a(re,C({key:"date-picker-years"},pe,{modelValue:s.value,"onUpdate:modelValue":p=>s.value=p,min:o.value,max:h.value}),null):a(le,C({key:"date-picker-month"},U,{modelValue:c.value,"onUpdate:modelValue":p=>c.value=p,month:r.value,"onUpdate:month":p=>r.value=p,year:s.value,"onUpdate:year":p=>s.value=p,min:o.value,max:h.value}),null)]})]),actions:n.actions})}),{}}});const ut=e=>(Ke("data-v-195f255e"),e=e(),Xe(),e),vt=ut(()=>ke("div",{class:"top-block"},null,-1)),mt={__name:"AppointmentView",setup(e){const{api:t}=Qe(),u=Je(),n=N([]),l=N();ve(async()=>{var d,r;try{const{data:s}=await t.get("/appointments/date",{params:{date:new Date().toISOString().split("T")[0]}});n.value.push(...s.result),await me()}catch(s){console.log(s);const P=((r=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";u({text:P,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});const k=()=>{const d=window.innerWidth;return d>=1200?"70%":d>=960?"80%":d>=600?"85%":"90%"},c=()=>window.innerWidth>=800?6:12,i=async()=>{try{const{data:d}=await t.get("/appointments/date/",{params:{date:l.value.getTime()}});n.value=d.result,console.log(d)}catch(d){console.log(d)}};return(d,r)=>(B(),J(R,null,[vt,ke("div",null,[a(nt,{class:"h-100 d-flex justify-center align-center",style:Ge({width:k()})},{default:_(()=>[a(Q,null,{default:_(()=>[a(T,{cols:"12"},{default:_(()=>[a(ct,{width:"100%",elevation:"0","first-day-of-week":1,"rounded-xl":"",modelValue:l.value,"onUpdate:modelValue":[r[0]||(r[0]=s=>l.value=s),i]},null,8,["modelValue"])]),_:1}),(B(!0),J(R,null,Z(n.value,s=>(B(),ee(T,{key:s._id,cols:c(),class:"cards"},{default:_(()=>[a(qe,{class:"appointment-card"},{default:_(()=>[a(Q,null,{default:_(()=>[a(T,{cols:"8"},{default:_(()=>[a(Ze,null,{default:_(()=>[O(G(l.value.toLocaleDateString()),1)]),_:1}),a(et,null,{default:_(()=>[O(G(s.begin+" ~ "+s.end),1)]),_:2},1024),a(tt,null,{default:_(()=>[a(Q,null,{default:_(()=>[(B(!0),J(R,null,Z(s.info,(P,v)=>(B(),ee(T,{cols:"auto",key:v,class:"chips"},{default:_(()=>[a(lt,{class:"chip",variant:"outlined"},{default:_(()=>[O(G(P),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),a(T,{cols:"4",class:"d-flex justify-center align-center",style:{"padding-right":"32px"}},{default:_(()=>[a(at,null,{default:_(()=>[a(x,{class:"reserve-btn",onClick:d.reserve},{default:_(()=>[O("預約")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["cols"]))),128))]),_:1})]),_:1},8,["style"])])],64))}},_t=ze(mt,[["__scopeId","data-v-195f255e"]]);export{_t as default};
