import{af as _,ae as k,ai as y,aq as B,ak as l,c as o,ap as e,aW as S,aX as u,J as q,ar as M,an as F,az as U}from"./index-e30a2666.js";import{v as N}from"./index-cc3d218e.js";import{u as R,a as n,V as $}from"./vee-validate.esm-b2a6c747.js";import{c as E,b as m,d as P}from"./index.esm-195823e1.js";import{V as T}from"./VRow-15ec713d.js";import{V as g}from"./VCol-ee16e47c.js";import{V as z}from"./VDivider-b50e760e.js";import{V as A}from"./VContainer-f01c952a.js";const D=F("h1",null,"註冊",-1),L={__name:"RegisterComp",setup(J){const{api:f}=U(),v=_(),V=k(),w=E({account:m().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(12,"使用者帳號長度不符"),email:m().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",r=>N.isEmail(r)),password:m().required("密碼為必填欄位").min(4,"密碼長度不符").max(12,"密碼長度不符"),passwordConfirm:m().required("密碼為必填欄位").min(4,"密碼長度不符").max(12,"密碼長度不符").oneOf([P("password")],"密碼不一致")}),{handleSubmit:b,isSubmitting:x}=R({validationSchema:w}),i=n("account"),d=n("email"),c=n("password"),p=n("passwordConfirm"),h=b(async r=>{var a,s;try{await f.post("/users",{account:r.account,email:r.email,password:r.password}),V({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"top"}}),v.push("/login")}catch(t){console.log(t);const C=((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";V({text:C,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(r,a)=>(y(),B(A,null,{default:l(()=>[o(T,null,{default:l(()=>[o(g,{cols:"12"},{default:l(()=>[D]),_:1}),o(z),o(g,{cols:"12"},{default:l(()=>[o($,{disabled:e(x),onSubmit:S(e(h),["prevent"])},{default:l(()=>[o(u,{label:"帳號",minlength:"4",maxlength:"12",counter:"",modelValue:e(i).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).value.value=s),"error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"信箱",type:"email",modelValue:e(d).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(d).value.value=s),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"密碼",type:"password",minlength:"4",maxlength:"12",counter:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(c).value.value=s),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"確認密碼",type:"password",minlength:"4",maxlength:"12",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),o(q,{type:"submit",color:"green",class:"w-100"},{default:l(()=>[M("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{L as _};
