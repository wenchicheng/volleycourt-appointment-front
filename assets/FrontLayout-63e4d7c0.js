import{_ as te}from"./RegisterComp-18731aae.js";import{_ as ae}from"./LoginComp-83f4fc9b.js";import{p as T,m as M,a as Y,g as k,u as w,c as a,b as le,d as oe,e as O,f as G,h as J,t as P,i as se,j as ne,k as K,l as re,n as ie,s as B,o as h,q as ue,V as ce,r as D,v as R,w as de,x as p,y as ve,z as E,A as me,B as ge,C as fe,D as be,E as he,F as Ve,G as A,H as ye,I as _e,J as H,K as xe,L as Se,M as Be,N as pe,O as Te,P as ke,Q as we,R as Ce,S as Ie,T as Ne,U as Le,W as Pe,_ as Ae,X as Re,Y as Ee,Z as $e,$ as Ue,a0 as S,a1 as F,a2 as c,a3 as He,a4 as De,a5 as j,a6 as L,a7 as Fe,a8 as z,a9 as $,aa as N,ab as je,ac as ze,ad as Me,ae as U,af as Ye,ag as We,ah as Xe,ai as qe}from"./index-ac92b338.js";import{V as Oe,a as Ge}from"./VNavigationDrawer-6a976a9b.js";import{u as Je}from"./ssrBoot-e899d526.js";import{V as Ke,a as Qe,b as Ze}from"./VList-8f7dea73.js";import{V as et,a as W,b as tt,c as X}from"./VTabs-2182b74e.js";import{V as at}from"./VContainer-b40a5f2d.js";import"./index-cc3d218e.js";import"./index.esm-195823e1.js";import"./vee-validate.esm-18f50315.js";import"./VRow-9903d744.js";import"./VCol-df819519.js";import"./VDivider-51be7c20.js";import"./VSlideGroup-b4750afb.js";const Q=T({text:String,...M(),...Y()},"VToolbarTitle"),Z=k()({name:"VToolbarTitle",props:Q(),setup(e,u){let{slots:t}=u;return w(()=>{const m=!!(t.default||t.text||e.text);return a(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var r;return[m&&a("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(r=t.default)==null?void 0:r.call(t)])]}})}),{}}}),lt=[null,"prominent","default","comfortable","compact"],ee=T({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>lt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...le(),...M(),...oe(),...O(),...Y({tag:"header"}),...G()},"VToolbar"),q=k()({name:"VToolbar",props:ee(),setup(e,u){var o;let{slots:t}=u;const{backgroundColorClasses:m,backgroundColorStyles:r}=J(P(e,"color")),{borderClasses:l}=se(e),{elevationClasses:g}=ne(e),{roundedClasses:b}=K(e),{themeClasses:f}=re(e),{rtlClasses:y}=ie(),n=B(!!(e.extended||(o=t.extension)!=null&&o.call(t))),V=h(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),v=h(()=>n.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ue({VBtn:{variant:"text"}}),w(()=>{var i;const d=!!(e.title||t.title),s=!!(t.image||e.image),_=(i=t.extension)==null?void 0:i.call(t);return n.value=!!(e.extended||_),a(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},m.value,l.value,g.value,b.value,f.value,y.value,e.class],style:[r.value,e.style]},{default:()=>[s&&a("div",{key:"image",class:"v-toolbar__image"},[t.image?a(D,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):a(ce,{key:"image-img",cover:!0,src:e.image},null)]),a(D,{defaults:{VTabs:{height:R(V.value)}}},{default:()=>{var x,C,I;return[a("div",{class:"v-toolbar__content",style:{height:R(V.value)}},[t.prepend&&a("div",{class:"v-toolbar__prepend"},[(x=t.prepend)==null?void 0:x.call(t)]),d&&a(Z,{key:"title",text:e.title},{text:t.title}),(C=t.default)==null?void 0:C.call(t),t.append&&a("div",{class:"v-toolbar__append"},[(I=t.append)==null?void 0:I.call(t)])])]}}),a(D,{defaults:{VTabs:{height:R(v.value)}}},{default:()=>[a(de,null,{default:()=>[n.value&&a("div",{class:"v-toolbar__extension",style:{height:R(v.value)}},[_])]})]})]})}),{contentHeight:V,extensionHeight:v}}}),ot=T({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function st(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=u;let m=0;const r=p(null),l=B(0),g=B(0),b=B(0),f=B(!1),y=B(!1),n=h(()=>Number(e.scrollThreshold)),V=h(()=>ve((n.value-l.value)/n.value||0)),v=()=>{const o=r.value;!o||t&&!t.value||(m=l.value,l.value="window"in o?o.pageYOffset:o.scrollTop,y.value=l.value<m,b.value=Math.abs(l.value-n.value))};return E(y,()=>{g.value=g.value||l.value}),E(f,()=>{g.value=0}),me(()=>{E(()=>e.scrollTarget,o=>{var s;const d=o?document.querySelector(o):window;d&&d!==r.value&&((s=r.value)==null||s.removeEventListener("scroll",v),r.value=d,r.value.addEventListener("scroll",v,{passive:!0}))},{immediate:!0})}),ge(()=>{var o;(o=r.value)==null||o.removeEventListener("scroll",v)}),t&&E(t,v,{immediate:!0}),{scrollThreshold:n,currentScroll:l,currentThreshold:b,isScrollActive:f,scrollRatio:V,isScrollingUp:y,savedScroll:g}}const nt=T({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ee(),...fe(),...ot(),height:{type:[Number,String],default:64}},"VAppBar"),rt=k()({name:"VAppBar",props:nt(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:t}=u;const m=p(),r=be(e,"modelValue"),l=h(()=>{var x;const i=new Set(((x=e.scrollBehavior)==null?void 0:x.split(" "))??[]);return{hide:i.has("hide"),inverted:i.has("inverted"),collapse:i.has("collapse"),elevate:i.has("elevate"),fadeImage:i.has("fade-image")}}),g=h(()=>{const i=l.value;return i.hide||i.inverted||i.collapse||i.elevate||i.fadeImage||!r.value}),{currentScroll:b,scrollThreshold:f,isScrollingUp:y,scrollRatio:n}=st(e,{canScroll:g}),V=h(()=>e.collapse||l.value.collapse&&(l.value.inverted?n.value>0:n.value===0)),v=h(()=>e.flat||l.value.elevate&&(l.value.inverted?b.value>0:b.value===0)),o=h(()=>l.value.fadeImage?l.value.inverted?1-n.value:n.value:void 0),d=h(()=>{var C,I;if(l.value.hide&&l.value.inverted)return 0;const i=((C=m.value)==null?void 0:C.contentHeight)??0,x=((I=m.value)==null?void 0:I.extensionHeight)??0;return i+x});he(h(()=>!!e.scrollBehavior),()=>{ye(()=>{l.value.hide?l.value.inverted?r.value=b.value>f.value:r.value=y.value||b.value<f.value:r.value=!0})});const{ssrBootStyles:s}=Je(),{layoutItemStyles:_}=Ve({id:e.name,order:h(()=>parseInt(e.order,10)),position:P(e,"location"),layoutSize:d,elementSize:B(void 0),active:r,absolute:P(e,"absolute")});return w(()=>{const i=q.filterProps(e);return a(q,A({ref:m,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{..._.value,"--v-toolbar-image-opacity":o.value,height:void 0,...s.value},e.style]},i,{collapse:V.value,flat:v.value}),t)}),{}}}),it=T({..._e({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),ut=k()({name:"VAppBarNavIcon",props:it(),setup(e,u){let{slots:t}=u;return w(()=>a(H,A(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),ct=k()({name:"VAppBarTitle",props:Q(),setup(e,u){let{slots:t}=u;return w(()=>a(Z,A(e,{class:"v-app-bar-title"}),t)),{}}});const dt=T({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:xe,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...M(),...Se({location:"top end"}),...O(),...Y(),...G(),...Be({transition:"scale-rotate-transition"})},"VBadge"),vt=k()({name:"VBadge",inheritAttrs:!1,props:dt(),setup(e,u){const{backgroundColorClasses:t,backgroundColorStyles:m}=J(P(e,"color")),{roundedClasses:r}=K(e),{t:l}=pe(),{textColorClasses:g,textColorStyles:b}=Te(P(e,"textColor")),{themeClasses:f}=ke(),{locationStyles:y}=we(e,!0,n=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(n)?+(e.offsetY??0):["left","right"].includes(n)?+(e.offsetX??0):0));return w(()=>{const n=Number(e.content),V=!e.max||isNaN(n)?e.content:n<=+e.max?n:`${e.max}+`,[v,o]=Ce(u.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(e.tag,A({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},o,{style:e.style}),{default:()=>{var d,s;return[a("div",{class:"v-badge__wrapper"},[(s=(d=u.slots).default)==null?void 0:s.call(d),a(Ie,{transition:e.transition},{default:()=>{var _,i;return[Ne(a("span",A({class:["v-badge__badge",f.value,t.value,r.value,g.value],style:[m.value,b.value,e.inline?{}:y.value],"aria-atomic":"true","aria-label":l(e.label,n),"aria-live":"polite",role:"status"},v),[e.dot?void 0:u.slots.badge?(i=(_=u.slots).badge)==null?void 0:i.call(_):e.icon?a(Pe,{icon:e.icon},null):V]),[[Le,e.modelValue]])]}})])]}})}),{}}}),mt=""+new URL("logo-05-404fdc65.png",import.meta.url).href;const gt=e=>(We("data-v-93e84b83"),e=e(),Xe(),e),ft={class:"drawer-btn-box"},bt={class:"d-flex justify-center mt-2 mb-4"},ht={class:"d-flex justify-center mt-2 mb-4"},Vt={href:"/"},yt=gt(()=>L("img",{src:mt,alt:"一起來打排",style:{height:"40px"}},null,-1)),_t={__name:"FrontLayout",setup(e){const u=p(!1),{apiAuth:t}=qe(),m=Re(),r=Ee(),l=$e(),g=p("login"),b=h(()=>[{to:"/about",text:"場館介紹",show:!0},{to:"/news",text:"最新消息",show:!0},{to:"/appointment",text:"預約報名",show:!0},{to:"/myappointment",text:"我的預約",show:l.isLogin},{to:"/shop",text:"排球選物",show:l.isLogin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:l.isLogin},{to:"/admin",text:"後台管理",show:l.isLogin&&l.isAdmin}]),f=p(!1),y=()=>{window.scrollY>100?f.value=!0:f.value=!1};window.addEventListener("scroll",y);const n=p(!1),V=async()=>{var v,o;try{await t.delete("/users/logout"),l.logout(),m({text:"登出成功",showCloseButton:!1,snackbarProps:{color:"success",timeout:2e3,location:"bottom"}}),r.push("/")}catch(d){console.log(d);const s=((o=(v=d==null?void 0:d.response)==null?void 0:v.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";m({text:s,showCloseButton:!1,snackbarProps:{color:"error",timeout:2e3,location:"top"}})}};return(v,o)=>{const d=Ue("RouterView");return S(),F(j,null,[a(Oe,{modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=s=>n.value=s),temporary:"",location:"right"},{default:c(()=>[L("div",ft,[a(H,{onClick:o[0]||(o[0]=s=>n.value=!1),class:"close-btn",icon:"mdi-close",size:"large"})]),a(Ke,{class:"v-list-centered"},{default:c(()=>[(S(!0),F(j,null,Fe(b.value,s=>(S(),F(j,{key:s.to},[s.show?(S(),$(Qe,{key:0,to:s.to,class:"d-flex align-center justify-center"},{default:c(()=>[a(Ze,{class:"list-title"},{default:c(()=>[N(Ye(s.text)+" ",1),s.to==="/cart"?(S(),$(vt,{key:0,content:z(l).cart,color:"rgb(26, 108, 163)",inline:"",class:"badge"},null,8,["content"])):U("",!0)]),_:2},1024)]),_:2},1032,["to"])):U("",!0)],64))),128)),L("div",bt,[z(l).isLogin?U("",!0):(S(),$(H,{key:0,class:"d-flex align-center justify-center login"},{default:c(()=>[N("登入 "),a(je,{activator:"parent",modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=s=>u.value=s),transition:"dialog-top-transition",width:"600"},{default:c(()=>[a(ze,null,{default:c(()=>[a(et,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=s=>g.value=s),color:"rgb(26, 108, 163)",class:"list-title","fixed-tabs":""},{default:c(()=>[a(W,{value:"login"},{default:c(()=>[N("登入")]),_:1}),a(W,{value:"register"},{default:c(()=>[N("註冊")]),_:1})]),_:1},8,["modelValue"]),a(Me,null,{default:c(()=>[a(tt,{modelValue:g.value,"onUpdate:modelValue":o[2]||(o[2]=s=>g.value=s)},{default:c(()=>[a(X,{value:"login"},{default:c(()=>[a(ae)]),_:1}),a(X,{value:"register"},{default:c(()=>[a(te)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))]),L("div",ht,[z(l).isLogin?(S(),$(H,{key:0,onClick:V,class:"d-flex align-center justify-center logout"},{default:c(()=>[N(" 登出 ")]),_:1})):U("",!0)])]),_:1})]),_:1},8,["modelValue"]),a(rt,{elevation:0,class:He({navbar:f.value}),style:De({backgroundColor:f.value?"rgba(224, 236, 246, 1)":"rgba(224, 236, 246, 0)"})},{default:c(()=>[a(at,{class:"d-flex align-center"},{default:c(()=>[L("a",Vt,[a(ct,null,{default:c(()=>[yt]),_:1})])]),_:1}),a(ut,{onClick:o[5]||(o[5]=s=>n.value=!0),class:"menu-btn"})]),_:1},8,["class","style"]),a(Ge,null,{default:c(()=>[a(d)]),_:1})],64)}}},$t=Ae(_t,[["__scopeId","data-v-93e84b83"]]);export{$t as default};
