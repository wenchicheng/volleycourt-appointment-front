import{Z as k,X as S,Y as b,$ as v,a0 as l,a9 as V,a2 as s,c as o,V as B,aj as P,aa as _,af as f,aQ as q,aR as W,J as I,ac as A,ai as w,_ as N,x as R,A as T,at as j,a1 as h,a6 as m,a4 as $,a5 as g,a7 as z,ag as L,ah as D,aS as E,aT as F}from"./index-ac92b338.js";import{g as J}from"./index-7d9a9c74.js";import{V as M}from"./VContainer-b40a5f2d.js";import{V as Q}from"./VRow-9903d744.js";import{V as y}from"./VCol-df819519.js";const U={__name:"ProductCard",props:{_id:{type:String,required:!0},category:{type:String,required:!0},image:{type:String,required:!0},name:{type:String,required:!0},price:{type:Number,required:!0},sell:{type:Boolean,default:!1}},setup(a){const{apiAuth:u}=w(),i=k(),c=S(),d=b(),p=a,t=async()=>{var n,e;if(!i.isLogin){d.push("/shop");return}try{const{data:r}=await u.patch("/users/cart",{product:p._id,quantity:1});i.cart=r.result,c({text:"已放入購物車",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(r){const C=((e=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:e.message)||"發生錯誤，請稍後再試";c({text:C,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(n,e)=>{const r=v("router-link");return l(),V(A,{class:"product-card"},{default:s(()=>[o(B,{src:a.image,contain:"",height:"240"},null,8,["src"]),o(P,null,{default:s(()=>[o(r,{class:"text-primary text-decoration-none",to:"/products/"+a._id},{default:s(()=>[_(f(a.name),1)]),_:1},8,["to"])]),_:1}),o(q,null,{default:s(()=>[_("$"+f(a.price),1)]),_:1}),o(W,{class:"text-center justify-center"},{default:s(()=>[o(I,{color:"primary","prepend-icon":"mdi-cart",class:"w-100",onClick:t},{default:s(()=>[_("加入購物車")]),_:1})]),_:1})]),_:1})}}};const x=a=>(L("data-v-a34a3632"),a=a(),D(),a),X=x(()=>m("div",{class:"top-block"},null,-1)),Y={class:"outline-all"},Z=x(()=>m("h1",{class:"text-center mt-15 mb-5"},"所有商品",-1)),G={__name:"ShopView",setup(a){const{api:u}=w(),i=S(),c=R([]);T(async()=>{var t,n;try{const{data:e}=await u.get("/products",{params:{itemsPerPage:-1}});c.value.push(...e.result.data),await j(),J.to(".product-card",{opacity:1,duration:.5})}catch(e){console.log(e);const r=((n=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:n.message)||"發生錯誤，請稍後再試";i({text:r,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});const d=()=>{const t=window.innerWidth;return t>=1200?"70%":t>=960?"80%":t>=600?"85%":"90%"},p=()=>{const t=window.innerWidth;return t>=1200?4:t>=960?3:t>=600?6:12};return(t,n)=>(l(),h(g,null,[X,m("div",Y,[o(M,{class:"h-100 d-flex justify-center align-center",style:$({width:d()})},{default:s(()=>[o(Q,null,{default:s(()=>[o(y,{cols:"12"},{default:s(()=>[Z]),_:1}),(l(!0),h(g,null,z(c.value,e=>(l(),V(y,{key:e._id,cols:p()},{default:s(()=>[o(U,E(F(e)),null,16)]),_:2},1032,["cols"]))),128))]),_:1})]),_:1},8,["style"])])],64))}},at=N(G,[["__scopeId","data-v-a34a3632"]]);export{at as default};
