import{p as Rn,m as kn,bW as Tn,g as Bn,bX as Un,x as G,u as xn,c as Dn,av as zn,o as P,bY as _,a8 as F,A as fn,bZ as Pe,z as de,B as $n,b_ as Fe,at as J,b$ as Ln,H as Wn,aq as qn,am as vn,c0 as Ie,s as Hn}from"./index-b2e4658c.js";const Gn=Rn({...kn(),...Tn()},"VForm"),Rt=Bn()({name:"VForm",props:Gn(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:l}=n;const a=Un(e),u=G();function f(d){d.preventDefault(),a.reset()}function h(d){const s=d,g=a.validate();s.then=g.then.bind(g),s.catch=g.catch.bind(g),s.finally=g.finally.bind(g),l("submit",s),s.defaultPrevented||g.then(b=>{var V;let{valid:S}=b;S&&((V=u.value)==null||V.submit())}),s.preventDefault()}return xn(()=>{var d;return Dn("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:f,onSubmit:h},[(d=t.default)==null?void 0:d.call(t,a)])}),zn(a,u)}});/**
  * vee-validate v4.12.5
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function L(e){return typeof e=="function"}function hn(e){return e==null}const ce=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ke(e){return Number(e)>=0}function Kn(e){const n=parseFloat(e);return isNaN(n)?e:n}function Yn(e){return typeof e=="object"&&e!==null}function Xn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function tn(e){if(!Yn(e)||Xn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Oe(e,n){return Object.keys(n).forEach(t=>{if(tn(n[t])&&tn(e[t])){e[t]||(e[t]={}),Oe(e[t],n[t]);return}e[t]=n[t]}),e}function pe(e){const n=e.split(".");if(!n.length)return"";let t=String(n[0]);for(let l=1;l<n.length;l++){if(Ke(n[l])){t+=`[${n[l]}]`;continue}t+=`.${n[l]}`}return t}const Zn={};function Jn(e){return Zn[e]}function rn(e,n,t){typeof t.value=="object"&&(t.value=C(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function C(e){if(typeof e!="object")return e;var n=0,t,l,a,u=Object.prototype.toString.call(e);if(u==="[object Object]"?a=Object.create(e.__proto__||null):u==="[object Array]"?a=Array(e.length):u==="[object Set]"?(a=new Set,e.forEach(function(f){a.add(C(f))})):u==="[object Map]"?(a=new Map,e.forEach(function(f,h){a.set(C(h),C(f))})):u==="[object Date]"?a=new Date(+e):u==="[object RegExp]"?a=new RegExp(e.source,e.flags):u==="[object DataView]"?a=new e.constructor(C(e.buffer)):u==="[object ArrayBuffer]"?a=e.slice(0):u.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)rn(a,l[n],Object.getOwnPropertyDescriptor(e,l[n]));for(n=0,l=Object.getOwnPropertyNames(e);n<l.length;n++)Object.hasOwnProperty.call(a,t=l[n])&&a[t]===e[t]||rn(a,t,Object.getOwnPropertyDescriptor(e,t))}return a||e}const Ye=Symbol("vee-validate-form"),Qn=Symbol("vee-validate-field-instance"),ln=Symbol("Default empty value"),et=typeof window<"u";function We(e){return L(e)&&!!e.__locatorRef}function Y(e){return!!e&&L(e.parse)&&e.__type==="VVTypedSchema"}function we(e){return!!e&&L(e.validate)}function mn(e){return e==="checkbox"||e==="radio"}function nt(e){return ce(e)||Array.isArray(e)}function tt(e){return Array.isArray(e)?e.length===0:ce(e)&&Object.keys(e).length===0}function Ne(e){return/^\[.+\]$/i.test(e)}function rt(e){return yn(e)&&e.multiple}function yn(e){return e.tagName==="SELECT"}function it(e){return gn(e)&&e.target&&"submit"in e.target}function gn(e){return e?!!(typeof Event<"u"&&L(Event)&&e instanceof Event||e&&e.srcElement):!1}function x(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,l,a;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(l=t;l--!==0;)if(!x(e[l],n[l]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;for(l of e.entries())if(!x(l[1],n.get(l[0])))return!1;return!0}if(an(e)&&an(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(l=t;l--!==0;)if(e[l]!==n[l])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();for(a=Object.keys(e),t=a.length,l=t;l--!==0;){var u=a[l];if(!x(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}function an(e){return et?e instanceof File:!1}function Xe(e){return Ne(e)?e.replace(/\[|\]/gi,""):e}function z(e,n,t){return e?Ne(n)?e[Xe(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,u)=>nt(a)&&u in a?a[u]:t,e):t}function le(e,n,t){if(Ne(n)){e[Xe(n)]=t;return}const l=n.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let u=0;u<l.length;u++){if(u===l.length-1){a[l[u]]=t;return}(!(l[u]in a)||hn(a[l[u]]))&&(a[l[u]]=Ke(l[u+1])?[]:{}),a=a[l[u]]}}function $e(e,n){if(Array.isArray(e)&&Ke(n)){e.splice(Number(n),1);return}ce(e)&&delete e[n]}function un(e,n){if(Ne(n)){delete e[Xe(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let u=0;u<t.length;u++){if(u===t.length-1){$e(l,t[u]);break}if(!(t[u]in l)||hn(l[t[u]]))break;l=l[t[u]]}const a=t.map((u,f)=>z(e,t.slice(0,f).join(".")));for(let u=a.length-1;u>=0;u--)if(tt(a[u])){if(u===0){$e(e,t[0]);continue}$e(a[u-1],t[u-1])}}function H(e){return Object.keys(e)}function bn(e,n=void 0){const t=Ie();return(t==null?void 0:t.provides[e])||qn(e,n)}function on(e,n,t){if(Array.isArray(e)){const l=[...e],a=l.findIndex(u=>x(u,n));return a>=0?l.splice(a,1):l.push(n),l}return x(e,n)?t:n}function sn(e,n=0){let t=null,l=[];return function(...a){return t&&clearTimeout(t),t=setTimeout(()=>{const u=e(...a);l.forEach(f=>f(u)),l=[]},n),new Promise(u=>l.push(u))}}function lt(e,n){return ce(n)&&n.number?Kn(e):e}function qe(e,n){let t;return async function(...a){const u=e(...a);t=u;const f=await u;return u!==t?f:(t=void 0,n(f,a))}}function He(e){return Array.isArray(e)?e:e?[e]:[]}function Ee(e,n){const t={};for(const l in e)n.includes(l)||(t[l]=e[l]);return t}function at(e){let n=null,t=[];return function(...l){const a=J(()=>{if(n!==a)return;const u=e(...l);t.forEach(f=>f(u)),t=[],n=null});return n=a,new Promise(u=>t.push(u))}}function Le(e){if(pn(e))return e._value}function pn(e){return"_value"in e}function ut(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ce(e){if(!gn(e))return e;const n=e.target;if(mn(n.type)&&pn(n))return Le(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(rt(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(Le);if(yn(n)){const t=Array.from(n.options).find(l=>l.selected);return t?Le(t):n.value}return ut(n)}function Vn(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ce(e)&&e._$$isNormalized?e:ce(e)?Object.keys(e).reduce((t,l)=>{const a=ot(e[l]);return e[l]!==!1&&(t[l]=dn(a)),t},n):typeof e!="string"?n:e.split("|").reduce((t,l)=>{const a=st(l);return a.name&&(t[a.name]=dn(a.params)),t},n):n}function ot(e){return e===!0?[]:Array.isArray(e)||ce(e)?e:[e]}function dn(e){const n=t=>typeof t=="string"&&t[0]==="@"?dt(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,l)=>(t[l]=n(e[l]),t),{})}const st=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function dt(e){const n=t=>z(t,e)||t[e];return n.__locatorRef=e,n}function ct(e){return Array.isArray(e)?e.filter(We):H(e).filter(n=>We(e[n])).map(n=>e[n])}const ft={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let vt=Object.assign({},ft);const Ve=()=>vt;async function On(e,n,t={}){const l=t==null?void 0:t.bails,a={name:(t==null?void 0:t.name)||"{field}",rules:n,label:t==null?void 0:t.label,bails:l??!0,formData:(t==null?void 0:t.values)||{}},f=(await ht(a,e)).errors;return{errors:f,valid:!f.length}}async function ht(e,n){if(Y(e.rules)||we(e.rules))return yt(n,e.rules);if(L(e.rules)||Array.isArray(e.rules)){const f={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},h=Array.isArray(e.rules)?e.rules:[e.rules],d=h.length,s=[];for(let g=0;g<d;g++){const b=h[g],S=await b(n,f);if(!(typeof S!="string"&&!Array.isArray(S)&&S)){if(Array.isArray(S))s.push(...S);else{const N=typeof S=="string"?S:Sn(f);s.push(N)}if(e.bails)return{errors:s}}}return{errors:s}}const t=Object.assign(Object.assign({},e),{rules:Vn(e.rules)}),l=[],a=Object.keys(t.rules),u=a.length;for(let f=0;f<u;f++){const h=a[f],d=await gt(t,n,{name:h,params:t.rules[h]});if(d.error&&(l.push(d.error),e.bails))return{errors:l}}return{errors:l}}function mt(e){return!!e&&e.name==="ValidationError"}function _n(e){return{__type:"VVTypedSchema",async parse(t){var l;try{return{output:await e.validate(t,{abortEarly:!1}),errors:[]}}catch(a){if(!mt(a))throw a;if(!(!((l=a.inner)===null||l===void 0)&&l.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const u=a.inner.reduce((f,h)=>{const d=h.path||"";return f[d]||(f[d]={errors:[],path:d}),f[d].errors.push(...h.errors),f},{});return{errors:Object.values(u)}}}}}async function yt(e,n){const l=await(Y(n)?n:_n(n)).parse(e),a=[];for(const u of l.errors)u.errors.length&&a.push(...u.errors);return{errors:a}}async function gt(e,n,t){const l=Jn(t.name);if(!l)throw new Error(`No such validator '${t.name}' exists.`);const a=bt(t.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:a})},f=await l(n,a,u);return typeof f=="string"?{error:f}:{error:f?void 0:Sn(u)}}function Sn(e){const n=Ve().generateMessage;return n?n(e):"Field is invalid"}function bt(e,n){const t=l=>We(l)?l(n):l;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((l,a)=>(l[a]=t(e[a]),l),{})}async function pt(e,n){const l=await(Y(e)?e:_n(e)).parse(C(n)),a={},u={};for(const f of l.errors){const h=f.errors,d=(f.path||"").replace(/\["(\d+)"\]/g,(s,g)=>`[${g}]`);a[d]={valid:!h.length,errors:h},h.length&&(u[d]=h[0])}return{valid:!l.errors.length,results:a,errors:u,values:l.value}}async function Vt(e,n,t){const a=H(e).map(async s=>{var g,b,S;const V=(g=t==null?void 0:t.names)===null||g===void 0?void 0:g[s],N=await On(z(n,s),e[s],{name:(V==null?void 0:V.name)||s,label:V==null?void 0:V.label,values:n,bails:(S=(b=t==null?void 0:t.bailsMap)===null||b===void 0?void 0:b[s])!==null&&S!==void 0?S:!0});return Object.assign(Object.assign({},N),{path:s})});let u=!0;const f=await Promise.all(a),h={},d={};for(const s of f)h[s.path]={valid:s.valid,errors:s.errors},s.valid||(u=!1,d[s.path]=s.errors[0]);return{valid:u,results:h,errors:d}}let cn=0;function Ot(e,n){const{value:t,initialValue:l,setInitialValue:a}=_t(e,n.modelValue,n.form);if(!n.form){let S=function(V){var N;"value"in V&&(t.value=V.value),"errors"in V&&s(V.errors),"touched"in V&&(b.touched=(N=V.touched)!==null&&N!==void 0?N:b.touched),"initialValue"in V&&a(V.initialValue)};const{errors:d,setErrors:s}=Et(),g=cn>=Number.MAX_SAFE_INTEGER?0:++cn,b=At(t,l,d,n.schema);return{id:g,path:e,value:t,initialValue:l,meta:b,flags:{pendingUnmount:{[g]:!1},pendingReset:!1},errors:d,setState:S}}const u=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate,schema:n.schema}),f=P(()=>u.errors);function h(d){var s,g,b;"value"in d&&(t.value=d.value),"errors"in d&&((s=n.form)===null||s===void 0||s.setFieldError(F(e),d.errors)),"touched"in d&&((g=n.form)===null||g===void 0||g.setFieldTouched(F(e),(b=d.touched)!==null&&b!==void 0?b:!1)),"initialValue"in d&&a(d.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:t,errors:f,meta:u,initialValue:l,flags:u.__flags,setState:h}}function _t(e,n,t){const l=G(F(n));function a(){return t?z(t.initialValues.value,F(e),F(l)):F(l)}function u(s){if(!t){l.value=s;return}t.setFieldInitialValue(F(e),s,!0)}const f=P(a);if(!t)return{value:G(a()),initialValue:f,setInitialValue:u};const h=St(n,t,f,e);return t.stageInitialValue(F(e),h,!0),{value:P({get(){return z(t.values,F(e))},set(s){t.setFieldValue(F(e),s,!1)}}),initialValue:f,setInitialValue:u}}function St(e,n,t,l){return Pe(e)?F(e):e!==void 0?e:z(n.values,F(l),F(t))}function At(e,n,t,l){var a,u;const f=(u=(a=l==null?void 0:l.describe)===null||a===void 0?void 0:a.call(l).required)!==null&&u!==void 0?u:!1,h=Fe({touched:!1,pending:!1,valid:!0,required:f,validated:!!F(t).length,initialValue:P(()=>F(n)),dirty:P(()=>!x(F(e),F(n)))});return de(t,d=>{h.valid=!d.length},{immediate:!0,flush:"sync"}),h}function Et(){const e=G([]);return{errors:e,setErrors:n=>{e.value=He(n)}}}function kt(e,n,t){return mn(t==null?void 0:t.type)?Pt(e,n,t):An(e,n,t)}function An(e,n,t){const{initialValue:l,validateOnMount:a,bails:u,type:f,checkedValue:h,label:d,validateOnValueUpdate:s,uncheckedValue:g,controlled:b,keepValueOnUnmount:S,syncVModel:V,form:N}=jt(t),ne=b?bn(Ye):void 0,O=N||ne,X=P(()=>pe(_(e))),W=P(()=>{if(_(O==null?void 0:O.schema))return;const p=F(n);return we(p)||Y(p)||L(p)||Array.isArray(p)?p:Vn(p)}),{id:fe,value:ve,initialValue:ae,meta:M,setState:he,errors:_e,flags:ue}=Ot(X,{modelValue:l,form:O,bails:u,label:d,type:f,validate:W.value?re:void 0,schema:Y(n)?n:void 0}),$=P(()=>_e.value[0]);V&&Ft({value:ve,prop:V,handleChange:R,shouldValidate:()=>s&&!ue.pendingReset});const me=(v,p=!1)=>{M.touched=!0,p&&te()};async function Se(v){var p,j;if(O!=null&&O.validateSchema){const{results:E}=await O.validateSchema(v);return(p=E[_(X)])!==null&&p!==void 0?p:{valid:!0,errors:[]}}return W.value?On(ve.value,W.value,{name:_(X),label:_(d),values:(j=O==null?void 0:O.values)!==null&&j!==void 0?j:{},bails:u}):{valid:!0,errors:[]}}const te=qe(async()=>(M.pending=!0,M.validated=!0,Se("validated-only")),v=>(ue.pendingUnmount[B.id]||(he({errors:v.errors}),M.pending=!1,M.valid=v.valid),v)),Q=qe(async()=>Se("silent"),v=>(M.valid=v.valid,v));function re(v){return(v==null?void 0:v.mode)==="silent"?Q():te()}function R(v,p=!0){const j=Ce(v);ge(j,p)}fn(()=>{if(a)return te();(!O||!O.validateSchema)&&Q()});function Me(v){M.touched=v}function ie(v){var p;const j=v&&"value"in v?v.value:ae.value;he({value:C(j),initialValue:C(j),touched:(p=v==null?void 0:v.touched)!==null&&p!==void 0?p:!1,errors:(v==null?void 0:v.errors)||[]}),M.pending=!1,M.validated=!1,Q()}const oe=Ie();function ge(v,p=!0){ve.value=oe&&V?lt(v,oe.props.modelModifiers):v,(p?te:Q)()}function Ae(v){he({errors:Array.isArray(v)?v:[v]})}const Ze=P({get(){return ve.value},set(v){ge(v,s)}}),B={id:fe,name:X,label:d,value:Ze,meta:M,errors:_e,errorMessage:$,type:f,checkedValue:h,uncheckedValue:g,bails:u,keepValueOnUnmount:S,resetField:ie,handleReset:()=>ie(),validate:re,handleChange:R,handleBlur:me,setState:he,setTouched:Me,setErrors:Ae,setValue:ge};if(vn(Qn,B),Pe(n)&&typeof F(n)!="function"&&de(n,(v,p)=>{x(v,p)||(M.validated?te():Q())},{deep:!0}),!O)return B;const Re=P(()=>{const v=W.value;return!v||L(v)||we(v)||Y(v)||Array.isArray(v)?{}:Object.keys(v).reduce((p,j)=>{const E=ct(v[j]).map(ee=>ee.__locatorRef).reduce((ee,Z)=>{const q=z(O.values,Z)||O.values[Z];return q!==void 0&&(ee[Z]=q),ee},{});return Object.assign(p,E),p},{})});return de(Re,(v,p)=>{if(!Object.keys(v).length)return;!x(v,p)&&(M.validated?te():Q())}),$n(()=>{var v;const p=(v=_(B.keepValueOnUnmount))!==null&&v!==void 0?v:_(O.keepValuesOnUnmount),j=_(X);if(p||!O||ue.pendingUnmount[B.id]){O==null||O.removePathState(j,fe);return}ue.pendingUnmount[B.id]=!0;const E=O.getPathState(j);if(Array.isArray(E==null?void 0:E.id)&&(E!=null&&E.multiple)?E!=null&&E.id.includes(B.id):(E==null?void 0:E.id)===B.id){if(E!=null&&E.multiple&&Array.isArray(E.value)){const Z=E.value.findIndex(q=>x(q,_(B.checkedValue)));if(Z>-1){const q=[...E.value];q.splice(Z,1),O.setFieldValue(j,q)}Array.isArray(E.id)&&E.id.splice(E.id.indexOf(B.id),1)}else O.unsetPathValue(_(X));O.removePathState(j,fe)}}),B}function jt(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!(e!=null&&e.syncVModel),l=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",a=t&&!("initialValue"in(e||{}))?Ge(Ie(),l):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:a});const u="valueProp"in e?e.valueProp:e.checkedValue,f="standalone"in e?!e.standalone:e.controlled,h=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:a,controlled:f??!0,checkedValue:u,syncVModel:h})}function Pt(e,n,t){const l=t!=null&&t.standalone?void 0:bn(Ye),a=t==null?void 0:t.checkedValue,u=t==null?void 0:t.uncheckedValue;function f(h){const d=h.handleChange,s=P(()=>{const b=_(h.value),S=_(a);return Array.isArray(b)?b.findIndex(V=>x(V,S))>=0:x(S,b)});function g(b,S=!0){var V,N;if(s.value===((V=b==null?void 0:b.target)===null||V===void 0?void 0:V.checked)){S&&h.validate();return}const ne=_(e),O=l==null?void 0:l.getPathState(ne),X=Ce(b);let W=(N=_(a))!==null&&N!==void 0?N:X;l&&(O!=null&&O.multiple)&&O.type==="checkbox"?W=on(z(l.values,ne)||[],W,void 0):(t==null?void 0:t.type)==="checkbox"&&(W=on(_(h.value),W,_(u))),d(W,S)}return Object.assign(Object.assign({},h),{checked:s,checkedValue:a,uncheckedValue:u,handleChange:g})}return f(An(e,n,t))}function Ft({prop:e,value:n,handleChange:t,shouldValidate:l}){const a=Ie();if(!a||!e)return;const u=typeof e=="string"?e:"modelValue",f=`update:${u}`;u in a.props&&(de(n,h=>{x(h,Ge(a,u))||a.emit(f,h)}),de(()=>Ge(a,u),h=>{if(h===ln&&n.value===void 0)return;const d=h===ln?void 0:h;x(d,n.value)||t(d,l())}))}function Ge(e,n){if(e)return e.props[n]}let wt=0;const je=["bails","fieldsCount","id","multiple","type","validate"];function En(e){const n=Object.assign({},_((e==null?void 0:e.initialValues)||{})),t=F(e==null?void 0:e.validationSchema);return t&&Y(t)&&L(t.cast)?C(t.cast(n)||{}):C(n)}function Tt(e){var n;const t=wt++;let l=0;const a=G(!1),u=G(!1),f=G(0),h=[],d=Fe(En(e)),s=G([]),g=G({}),b=G({}),S=at(()=>{b.value=s.value.reduce((i,r)=>(i[pe(_(r.path))]=r,i),{})});function V(i,r){const o=R(i);if(!o){typeof i=="string"&&(g.value[pe(i)]=He(r));return}if(typeof i=="string"){const c=pe(i);g.value[c]&&delete g.value[c]}o.errors=He(r),o.valid=!o.errors.length}function N(i){H(i).forEach(r=>{V(r,i[r])})}e!=null&&e.initialErrors&&N(e.initialErrors);const ne=P(()=>{const i=s.value.reduce((r,o)=>(o.errors.length&&(r[o.path]=o.errors),r),{});return Object.assign(Object.assign({},g.value),i)}),O=P(()=>H(ne.value).reduce((i,r)=>{const o=ne.value[r];return o!=null&&o.length&&(i[r]=o[0]),i},{})),X=P(()=>s.value.reduce((i,r)=>(i[r.path]={name:r.path||"",label:r.label||""},i),{})),W=P(()=>s.value.reduce((i,r)=>{var o;return i[r.path]=(o=r.bails)!==null&&o!==void 0?o:!0,i},{})),fe=Object.assign({},(e==null?void 0:e.initialErrors)||{}),ve=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:ae,originalInitialValues:M,setInitialValues:he}=It(s,d,e),_e=Ct(s,d,M,O),ue=P(()=>s.value.reduce((i,r)=>{const o=z(d,r.path);return le(i,r.path,o),i},{})),$=e==null?void 0:e.validationSchema;function me(i,r){var o,c;const y=P(()=>z(ae.value,_(i))),m=b.value[_(i)],A=(r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio";if(m&&A){m.multiple=!0;const K=l++;return Array.isArray(m.id)?m.id.push(K):m.id=[m.id,K],m.fieldsCount++,m.__flags.pendingUnmount[K]=!1,m}const k=P(()=>z(d,_(i))),I=_(i),U=ie.findIndex(K=>K===I);U!==-1&&ie.splice(U,1);const w=P(()=>{var K,be,xe,nn,De,ze;return Y($)?(xe=(be=(K=$).describe)===null||be===void 0?void 0:be.call(K,_(i)).required)!==null&&xe!==void 0?xe:!1:Y(r==null?void 0:r.schema)&&(ze=(De=(nn=r==null?void 0:r.schema).describe)===null||De===void 0?void 0:De.call(nn).required)!==null&&ze!==void 0?ze:!1}),T=l++,D=Fe({id:T,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=fe[I])===null||o===void 0)&&o.length),required:w,initialValue:y,errors:Hn([]),bails:(c=r==null?void 0:r.bails)!==null&&c!==void 0?c:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:k,multiple:!1,__flags:{pendingUnmount:{[T]:!1},pendingReset:!1},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:P(()=>!x(F(k),F(y)))});return s.value.push(D),b.value[I]=D,S(),O.value[I]&&!fe[I]&&J(()=>{se(I,{mode:"silent"})}),Pe(i)&&de(i,K=>{S();const be=C(k.value);b.value[K]=D,J(()=>{le(d,K,be)})}),D}const Se=sn(en,5),te=sn(en,5),Q=qe(async i=>await(i==="silent"?Se():te()),(i,[r])=>{const o=H(p.errorBag.value),y=[...new Set([...H(i.results),...s.value.map(m=>m.path),...o])].sort().reduce((m,A)=>{var k;const I=A,U=R(I)||Me(I),w=((k=i.results[I])===null||k===void 0?void 0:k.errors)||[],T=_(U==null?void 0:U.path)||I,D=Nt({errors:w,valid:!w.length},m.results[T]);return m.results[T]=D,D.valid||(m.errors[T]=D.errors[0]),U&&g.value[T]&&delete g.value[T],U?(U.valid=D.valid,r==="silent"||r==="validated-only"&&!U.validated||V(U,D.errors),m):(V(T,w),m)},{valid:i.valid,results:{},errors:{}});return i.values&&(y.values=i.values),y});function re(i){s.value.forEach(i)}function R(i){const r=typeof i=="string"?pe(i):i;return typeof r=="string"?b.value[r]:r}function Me(i){return s.value.filter(o=>i.startsWith(o.path)).reduce((o,c)=>o?c.path.length>o.path.length?c:o:c,void 0)}let ie=[],oe;function ge(i){return ie.push(i),oe||(oe=J(()=>{[...ie].sort().reverse().forEach(o=>{un(d,o)}),ie=[],oe=null})),oe}function Ae(i){return function(o,c){return function(m){return m instanceof Event&&(m.preventDefault(),m.stopPropagation()),re(A=>A.touched=!0),a.value=!0,f.value++,ye().then(A=>{const k=C(d);if(A.valid&&typeof o=="function"){const I=C(ue.value);let U=i?I:k;return A.values&&(U=A.values),o(U,{evt:m,controlledValues:I,setErrors:N,setFieldError:V,setTouched:ke,setFieldTouched:q,setValues:ee,setFieldValue:j,resetForm:Te,resetField:Je})}!A.valid&&typeof c=="function"&&c({values:k,evt:m,errors:A.errors,results:A.results})}).then(A=>(a.value=!1,A),A=>{throw a.value=!1,A})}}}const B=Ae(!1);B.withControlled=Ae(!0);function Re(i,r){const o=s.value.findIndex(y=>y.path===i&&(Array.isArray(y.id)?y.id.includes(r):y.id===r)),c=s.value[o];if(!(o===-1||!c)){if(J(()=>{se(i,{mode:"silent",warn:!1})}),c.multiple&&c.fieldsCount&&c.fieldsCount--,Array.isArray(c.id)){const y=c.id.indexOf(r);y>=0&&c.id.splice(y,1),delete c.__flags.pendingUnmount[r]}(!c.multiple||c.fieldsCount<=0)&&(s.value.splice(o,1),Qe(i),S(),delete b.value[i])}}function v(i){H(b.value).forEach(r=>{r.startsWith(i)&&delete b.value[r]}),s.value=s.value.filter(r=>!r.path.startsWith(i)),J(()=>{S()})}const p={formId:t,values:d,controlledValues:ue,errorBag:ne,errors:O,schema:$,submitCount:f,meta:_e,isSubmitting:a,isValidating:u,fieldArrays:h,keepValuesOnUnmount:ve,validateSchema:F($)?Q:void 0,validate:ye,setFieldError:V,validateField:se,setFieldValue:j,setValues:ee,setErrors:N,setFieldTouched:q,setTouched:ke,resetForm:Te,resetField:Je,handleSubmit:B,useFieldModel:In,defineInputBinds:Nn,defineComponentBinds:Mn,defineField:Ue,stageInitialValue:wn,unsetInitialValue:Qe,setFieldInitialValue:Be,createPathState:me,getPathState:R,unsetPathValue:ge,removePathState:Re,initialValues:ae,getAllPathStates:()=>s.value,destroyPath:v,isFieldTouched:jn,isFieldDirty:Pn,isFieldValid:Fn};function j(i,r,o=!0){const c=C(r),y=typeof i=="string"?i:i.path;R(y)||me(y),le(d,y,c),o&&se(y)}function E(i,r=!0){H(d).forEach(o=>{delete d[o]}),H(i).forEach(o=>{j(o,i[o],!1)}),r&&ye()}function ee(i,r=!0){Oe(d,i),h.forEach(o=>o&&o.reset()),r&&ye()}function Z(i,r){const o=R(_(i))||me(i);return P({get(){return o.value},set(c){var y;const m=_(i);j(m,c,(y=_(r))!==null&&y!==void 0?y:!1)}})}function q(i,r){const o=R(i);o&&(o.touched=r)}function jn(i){const r=R(i);return r?r.touched:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function Pn(i){const r=R(i);return r?r.dirty:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function Fn(i){const r=R(i);return r?r.valid:s.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function ke(i){if(typeof i=="boolean"){re(r=>{r.touched=i});return}H(i).forEach(r=>{q(r,!!i[r])})}function Je(i,r){var o;const c=r&&"value"in r?r.value:z(ae.value,i),y=R(i);y&&(y.__flags.pendingReset=!0),Be(i,C(c),!0),j(i,c,!1),q(i,(o=r==null?void 0:r.touched)!==null&&o!==void 0?o:!1),V(i,(r==null?void 0:r.errors)||[]),J(()=>{y&&(y.__flags.pendingReset=!1)})}function Te(i,r){let o=C(i!=null&&i.values?i.values:M.value);o=r!=null&&r.force?o:Oe(M.value,o),o=Y($)&&L($.cast)?$.cast(o):o,he(o),re(c=>{var y;c.__flags.pendingReset=!0,c.validated=!1,c.touched=((y=i==null?void 0:i.touched)===null||y===void 0?void 0:y[c.path])||!1,j(c.path,z(o,c.path),!1),V(c.path,void 0)}),r!=null&&r.force?E(o,!1):ee(o,!1),N((i==null?void 0:i.errors)||{}),f.value=(i==null?void 0:i.submitCount)||0,J(()=>{ye({mode:"silent"}),re(c=>{c.__flags.pendingReset=!1})})}async function ye(i){const r=(i==null?void 0:i.mode)||"force";if(r==="force"&&re(m=>m.validated=!0),p.validateSchema)return p.validateSchema(r);u.value=!0;const o=await Promise.all(s.value.map(m=>m.validate?m.validate(i).then(A=>({key:m.path,valid:A.valid,errors:A.errors})):Promise.resolve({key:m.path,valid:!0,errors:[]})));u.value=!1;const c={},y={};for(const m of o)c[m.key]={valid:m.valid,errors:m.errors},m.errors.length&&(y[m.key]=m.errors[0]);return{valid:o.every(m=>m.valid),results:c,errors:y}}async function se(i,r){var o;const c=R(i);if(c&&(r==null?void 0:r.mode)!=="silent"&&(c.validated=!0),$){const{results:y}=await Q((r==null?void 0:r.mode)||"validated-only");return y[i]||{errors:[],valid:!0}}return c!=null&&c.validate?c.validate(r):(!c&&(o=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function Qe(i){un(ae.value,i)}function wn(i,r,o=!1){Be(i,r),le(d,i,r),o&&!(e!=null&&e.initialValues)&&le(M.value,i,C(r))}function Be(i,r,o=!1){le(ae.value,i,C(r)),o&&le(M.value,i,C(r))}async function en(){const i=F($);if(!i)return{valid:!0,results:{},errors:{}};u.value=!0;const r=we(i)||Y(i)?await pt(i,d):await Vt(i,d,{names:X.value,bailsMap:W.value});return u.value=!1,r}const Cn=B((i,{evt:r})=>{it(r)&&r.target.submit()});fn(()=>{if(e!=null&&e.initialErrors&&N(e.initialErrors),e!=null&&e.initialTouched&&ke(e.initialTouched),e!=null&&e.validateOnMount){ye();return}p.validateSchema&&p.validateSchema("silent")}),Pe($)&&de($,()=>{var i;(i=p.validateSchema)===null||i===void 0||i.call(p,"validated-only")}),vn(Ye,p);function Ue(i,r){const o=L(r)||r==null?void 0:r.label,c=R(_(i))||me(i,{label:o}),y=()=>L(r)?r(Ee(c,je)):r||{};function m(){var w;c.touched=!0,((w=y().validateOnBlur)!==null&&w!==void 0?w:Ve().validateOnBlur)&&se(c.path)}function A(){var w;((w=y().validateOnInput)!==null&&w!==void 0?w:Ve().validateOnInput)&&J(()=>{se(c.path)})}function k(){var w;((w=y().validateOnChange)!==null&&w!==void 0?w:Ve().validateOnChange)&&J(()=>{se(c.path)})}const I=P(()=>{const w={onChange:k,onInput:A,onBlur:m};return L(r)?Object.assign(Object.assign({},w),r(Ee(c,je)).props||{}):r!=null&&r.props?Object.assign(Object.assign({},w),r.props(Ee(c,je))):w});return[Z(i,()=>{var w,T,D;return(D=(w=y().validateOnModelUpdate)!==null&&w!==void 0?w:(T=Ve())===null||T===void 0?void 0:T.validateOnModelUpdate)!==null&&D!==void 0?D:!0}),I]}function In(i){return Array.isArray(i)?i.map(r=>Z(r,!0)):Z(i)}function Nn(i,r){const[o,c]=Ue(i,r);function y(){c.value.onBlur()}function m(k){const I=Ce(k);j(_(i),I,!1),c.value.onInput()}function A(k){const I=Ce(k);j(_(i),I,!1),c.value.onChange()}return P(()=>Object.assign(Object.assign({},c.value),{onBlur:y,onInput:m,onChange:A,value:o.value}))}function Mn(i,r){const[o,c]=Ue(i,r),y=R(_(i));function m(A){o.value=A}return P(()=>{const A=L(r)?r(Ee(y,je)):r||{};return Object.assign({[A.model||"modelValue"]:o.value,[`onUpdate:${A.model||"modelValue"}`]:m},c.value)})}return Object.assign(Object.assign({},p),{values:Ln(d),handleReset:()=>Te(),submitForm:Cn})}function Ct(e,n,t,l){const a={touched:"some",pending:"some",valid:"every"},u=P(()=>!x(n,F(t)));function f(){const d=e.value;return H(a).reduce((s,g)=>{const b=a[g];return s[g]=d[b](S=>S[g]),s},{})}const h=Fe(f());return Wn(()=>{const d=f();h.touched=d.touched,h.valid=d.valid,h.pending=d.pending}),P(()=>Object.assign(Object.assign({initialValues:F(t)},h),{valid:h.valid&&!H(l.value).length,dirty:u.value}))}function It(e,n,t){const l=En(t),a=G(l),u=G(C(l));function f(h,d=!1){a.value=Oe(C(a.value)||{},C(h)),u.value=Oe(C(u.value)||{},C(h)),d&&e.value.forEach(s=>{if(s.touched)return;const b=z(a.value,s.path);le(n,s.path,C(b))})}return{initialValues:a,originalInitialValues:u,setInitialValues:f}}function Nt(e,n){return n?{valid:e.valid&&n.valid,errors:[...e.errors,...n.errors]}:e}export{Rt as V,kt as a,Tt as u};
