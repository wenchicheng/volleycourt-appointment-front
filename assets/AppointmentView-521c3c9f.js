import{p as x,b as pe,m as Pe,aE as _e,d as De,L as be,aF as Ce,e as Se,a as xe,f as we,g as w,l as Me,h as G,t as se,i as Ae,aG as Ye,j as Ie,Q as Ne,aH as We,k as Be,u as I,c as l,o as V,J as S,aI as Oe,S as Te,r as H,aJ as $e,aK as O,D as Y,aL as $,aM as je,x as N,s as z,aa as B,aN as re,H as oe,G as C,v as ie,A as de,at as ce,aO as He,au as j,N as Re,z as L,a5 as J,aP as Ee,_ as Le,X as Ue,a0 as U,a1 as K,a6 as ue,a2 as b,a4 as Fe,ai as ze,a7 as Je,ag as Ge,ah as Qe,a9 as Ke,ac as Xe,aj as qe,af as F,aQ as Ze,aR as et}from"./index-fc950cf0.js";import{g as tt}from"./index-7d9a9c74.js";import"./index.esm-195823e1.js";import{V as at}from"./VContainer-2bf56397.js";import{V as nt}from"./VRow-e02eb952.js";import{V as X}from"./VCol-eebdc897.js";import{V as lt}from"./VChip-f39d3fa1.js";import"./VSlideGroup-bc2fc257.js";const ve=x({color:String,...pe(),...Pe(),..._e(),...De(),...be(),...Ce(),...Se(),...xe(),...we()},"VSheet"),q=w()({name:"VSheet",props:ve(),setup(e,t){let{slots:u}=t;const{themeClasses:a}=Me(e),{backgroundColorClasses:n,backgroundColorStyles:k}=G(se(e,"color")),{borderClasses:c}=Ae(e),{dimensionStyles:i}=Ye(e),{elevationClasses:d}=Ie(e),{locationStyles:r}=Ne(e),{positionClasses:s}=We(e),{roundedClasses:P}=Be(e);return I(()=>l(e.tag,{class:["v-sheet",a.value,n.value,c.value,d.value,s.value,P.value,e.class],style:[k.value,i.value,r.value,e.style]},u)),{}}});const me=x({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Z=w()({name:"VDatePickerControls",props:me(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:u}=t;const a=V(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),n=V(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),k=V(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),c=V(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function i(){u("click:prev")}function d(){u("click:next")}function r(){u("click:year")}function s(){u("click:month")}return I(()=>l("div",{class:["v-date-picker-controls"]},[l(S,{class:"v-date-picker-controls__month-btn",disabled:a.value,text:e.text,variant:"text",rounded:!0,onClick:s},null),l(S,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:n.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:r},null),l(Oe,{key:"mode-spacer"},null),l("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[l(S,{disabled:k.value,icon:e.prevIcon,variant:"text",onClick:i},null),l(S,{disabled:c.value,icon:e.nextIcon,variant:"text",onClick:d},null)])])),{}}});const st=x({appendIcon:String,color:String,header:String,transition:String,onClick:$e()},"VDatePickerHeader"),ee=w()({name:"VDatePickerHeader",props:st(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:u,slots:a}=t;const{backgroundColorClasses:n,backgroundColorStyles:k}=G(e,"color");function c(){u("click")}function i(){u("click:append")}return I(()=>{const d=!!(a.default||e.header),r=!!(a.append||e.appendIcon);return l("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},n.value],style:k.value,onClick:c},[a.prepend&&l("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),d&&l(Te,{key:"content",name:e.transition},{default:()=>{var s;return[l("div",{key:e.header,class:"v-date-picker-header__content"},[((s=a.default)==null?void 0:s.call(a))??e.header])]}}),r&&l("div",{class:"v-date-picker-header__append"},[a.append?l(H,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var s;return[(s=a.append)==null?void 0:s.call(a)]}}):l(S,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}});const rt=x({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function ot(e){const t=O(),u=Y(e,"modelValue",[],v=>$(v)),a=V(()=>e.displayValue?t.date(e.displayValue):u.value.length>0?t.date(u.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),n=Y(e,"year",void 0,v=>{const h=v!=null?Number(v):t.getYear(a.value);return t.startOfYear(t.setYear(t.date(),h))},v=>t.getYear(v)),k=Y(e,"month",void 0,v=>{const h=v!=null?Number(v):t.getMonth(a.value),m=t.setYear(t.startOfMonth(t.date()),t.getYear(n.value));return t.setMonth(m,h)},v=>t.getMonth(v)),c=V(()=>{const v=t.getWeekArray(k.value),h=v.flat(),m=6*7;if(h.length<m){const o=h[h.length-1];let f=[];for(let g=1;g<=m-h.length;g++)f.push(t.addDays(o,g)),g%7===0&&(v.push(f),f=[])}return v});function i(v,h){return v.filter(m=>e.weekdays.includes(t.toJsDate(m).getDay())).map((m,o)=>{const f=t.toISO(m),g=!t.isSameMonth(m,k.value),D=t.isSameDay(m,t.startOfMonth(k.value)),M=t.isSameDay(m,t.endOfMonth(k.value)),W=t.isSameDay(m,k.value);return{date:m,isoDate:f,formatted:t.format(m,"keyboardDate"),year:t.getYear(m),month:t.getMonth(m),isDisabled:P(m),isWeekStart:o%7===0,isWeekEnd:o%7===6,isToday:t.isSameDay(m,h),isAdjacent:g,isHidden:g&&!e.showAdjacentMonths,isStart:D,isSelected:u.value.some(T=>t.isSameDay(m,T)),isEnd:M,isSame:W,localized:t.format(m,"dayOfMonth")}})}const d=V(()=>{const v=t.startOfWeek(u.value),h=[];for(let f=0;f<=6;f++)h.push(t.addDays(v,f));const m=h,o=t.date();return i(m,o)}),r=V(()=>{const v=c.value.flat(),h=t.date();return i(v,h)}),s=V(()=>c.value.map(v=>v.length?je(t,v[0]):null));function P(v){if(e.disabled)return!0;const h=t.date(v);return e.min&&t.isAfter(t.date(e.min),h)||e.max&&t.isAfter(h,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(m=>t.isSameDay(t.date(m),h)):typeof e.allowedDates=="function"?!e.allowedDates(h):!1}return{displayValue:a,daysInMonth:r,daysInWeek:d,genDays:i,model:u,weeksInMonth:c,weekNumbers:s}}const ke=x({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...rt()},"VDatePickerMonth"),te=w()({name:"VDatePickerMonth",props:ke(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:u,slots:a}=t;const n=N(),{daysInMonth:k,model:c,weekNumbers:i}=ot(e),d=O(),r=z(),s=z(),P=V(()=>{const o=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return c.value.length>=o});function v(o){const f=d.startOfDay(o);if(!r.value)r.value=f,c.value=[r.value];else if(s.value)r.value=o,s.value=void 0,c.value=[r.value];else{if(d.isSameDay(o,r.value)){r.value=void 0,c.value=[];return}else d.isBefore(o,r.value)?(s.value=r.value,r.value=f):s.value=f;const g=d.getDiff(s.value,r.value),D=[r.value];for(let M=1;M<g;M++){const W=d.addDays(r.value,M);D.push(W)}D.push(s.value),c.value=D}}function h(o){const f=c.value.findIndex(g=>d.isSameDay(g,o));if(f===-1)c.value=[...c.value,o];else{const g=[...c.value];g.splice(f,1),c.value=g}}function m(o){e.multiple==="range"?v(o):e.multiple?h(o):c.value=[o]}return()=>l("div",{class:"v-date-picker-month"},[e.showWeek&&l("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&l("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[B(" ")]),i.value.map(o=>l("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[o]))]),l("div",{ref:n,class:"v-date-picker-month__days"},[!e.hideWeekdays&&d.getWeekdays().map(o=>l("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[o])),k.value.map((o,f)=>{const g={props:{onClick:()=>m(o.date)},item:o,i:f};return P.value&&!o.isSelected&&(o.isDisabled=!0),l("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":o.isAdjacent,"v-date-picker-month__day--hide-adjacent":o.isHidden,"v-date-picker-month__day--selected":o.isSelected,"v-date-picker-month__day--week-end":o.isWeekEnd,"v-date-picker-month__day--week-start":o.isWeekStart}],"data-v-date":o.isDisabled?void 0:o.isoDate},[(e.showAdjacentMonths||!o.isAdjacent)&&l(H,{defaults:{VBtn:{color:(o.isSelected||o.isToday)&&!o.isDisabled?e.color:void 0,disabled:o.isDisabled,icon:!0,ripple:!1,text:o.localized,variant:o.isDisabled?"text":o.isToday&&!o.isSelected?"outlined":"flat",onClick:()=>m(o.date)}}},{default:()=>{var D;return[((D=a.day)==null?void 0:D.call(a,g))??l(S,g.props,null)]}})])})])])}});const he=x({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),ae=w()({name:"VDatePickerMonths",props:he(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:u}=t;const a=O(),n=Y(e,"modelValue"),k=V(()=>{let c=a.startOfYear(a.date());return re(12).map(i=>{const d=a.format(c,"monthShort");return c=a.getNextMonth(c),{text:d,value:i}})});return oe(()=>{n.value=n.value??a.getMonth(a.date())}),I(()=>l("div",{class:"v-date-picker-months",style:{height:ie(e.height)}},[l("div",{class:"v-date-picker-months__content"},[k.value.map((c,i)=>{var s;const d={active:n.value===i,color:n.value===i?e.color:void 0,rounded:!0,text:c.text,variant:n.value===c.value?"flat":"text",onClick:()=>r(i)};function r(P){n.value=P}return((s=u.month)==null?void 0:s.call(u,{month:c,i,props:d}))??l(S,C({key:"month"},d,{onClick:()=>r(i)}),null)})])])),{}}});const fe=x({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),ne=w()({name:"VDatePickerYears",props:fe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:u}=t;const a=O(),n=Y(e,"modelValue"),k=V(()=>{const i=a.getYear(a.date());let d=i-100,r=i+52;e.min&&(d=a.getYear(a.date(e.min))),e.max&&(r=a.getYear(a.date(e.max)));let s=a.startOfYear(a.date());return s=a.setYear(s,d),re(r-d+1,d).map(P=>{const v=a.format(s,"year");return s=a.setYear(s,a.getYear(s)+1),{text:v,value:P}})});oe(()=>{n.value=n.value??a.getYear(a.date())});const c=N();return de(async()=>{var i;await ce(),(i=c.value)==null||i.$el.scrollIntoView({block:"center"})}),I(()=>l("div",{class:"v-date-picker-years",style:{height:ie(e.height)}},[l("div",{class:"v-date-picker-years__content"},[k.value.map((i,d)=>{var s;const r={ref:n.value===i.value?c:void 0,active:n.value===i.value,color:n.value===i.value?e.color:void 0,rounded:!0,text:i.text,variant:n.value===i.value?"flat":"text",onClick:()=>n.value=i.value};return((s=u.year)==null?void 0:s.call(u,{year:i,i:d,props:r}))??l(S,C({key:"month"},r),null)})])])),{}}});const it=He("v-picker-title"),ye=x({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...ve()},"VPicker"),le=w()({name:"VPicker",props:ye(),setup(e,t){let{slots:u}=t;const{backgroundColorClasses:a,backgroundColorStyles:n}=G(se(e,"color"));return I(()=>{const k=q.filterProps(e),c=!!(e.title||u.title);return l(q,C(k,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!u.actions},e.class],style:e.style}),{default:()=>{var i;return[!e.hideHeader&&l("div",{key:"header",class:[a.value],style:[n.value]},[c&&l(it,{key:"picker-title"},{default:()=>{var d;return[((d=u.title)==null?void 0:d.call(u))??e.title]}}),u.header&&l("div",{class:"v-picker__header"},[u.header()])]),l("div",{class:"v-picker__body"},[(i=u.default)==null?void 0:i.call(u)]),u.actions&&l(H,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[l("div",{class:"v-picker__actions"},[u.actions()])]})]}})}),{}}}),dt=x({header:{type:String,default:"$vuetify.datePicker.header"},...me(),...ke(),...j(he(),["modelValue"]),...j(fe(),["modelValue"]),...ye({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ct=w()({name:"VDatePicker",props:dt(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:u,slots:a}=t;const n=O(),{t:k}=Re(),c=Y(e,"modelValue",void 0,y=>$(y),y=>e.multiple?y:y[0]),i=Y(e,"viewMode"),d=V(()=>{var _;const y=n.date((_=c.value)==null?void 0:_[0]);return y&&n.isValid(y)?y:n.date()}),r=N(Number(e.month??n.getMonth(n.startOfMonth(d.value)))),s=N(Number(e.year??n.getYear(n.startOfYear(n.setMonth(d.value,r.value))))),P=z(!1),v=V(()=>e.multiple&&c.value.length>1?k("$vuetify.datePicker.itemsSelected",c.value.length):c.value[0]&&n.isValid(c.value[0])?n.format(c.value[0],"normalDateWithWeekday"):k(e.header)),h=V(()=>n.format(n.date(new Date(s.value,r.value,1)),"monthAndYear")),m=V(()=>`date-picker-header${P.value?"-reverse":""}-transition`),o=V(()=>{const y=n.date(e.min);return e.min&&n.isValid(y)?y:null}),f=V(()=>{const y=n.date(e.max);return e.max&&n.isValid(y)?y:null}),g=V(()=>{if(e.disabled)return!0;const y=[];if(i.value!=="month")y.push("prev","next");else{let _=n.date();if(_=n.setYear(_,s.value),_=n.setMonth(_,r.value),o.value){const A=n.addDays(n.startOfMonth(_),-1);n.isAfter(o.value,A)&&y.push("prev")}if(f.value){const A=n.addDays(n.endOfMonth(_),1);n.isAfter(A,f.value)&&y.push("next")}}return y});function D(){r.value<11?r.value++:(s.value++,r.value=0)}function M(){r.value>0?r.value--:(s.value--,r.value=11)}function W(){i.value="month"}function T(){i.value=i.value==="months"?"month":"months"}function Q(){i.value=i.value==="year"?"month":"year"}return L(r,()=>{i.value==="months"&&T(),u("update:month",r.value)}),L(s,()=>{i.value==="year"&&Q(),u("update:year",s.value)}),L(c,(y,_)=>{const A=n.date($(y)[0]),R=n.date($(_)[0]);P.value=n.isBefore(A,R)}),I(()=>{const y=le.filterProps(e),_=Z.filterProps(e),A=ee.filterProps(e),R=te.filterProps(e),ge=j(ae.filterProps(e),["modelValue"]),Ve=j(ne.filterProps(e),["modelValue"]),E={header:v.value,transition:m.value};return l(le,C(y,{class:["v-date-picker",`v-date-picker--${i.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var p;return((p=a.title)==null?void 0:p.call(a))??l("div",{class:"v-date-picker__title"},[k(e.title)])},header:()=>a.header?l(H,{defaults:{VDatePickerHeader:{...E}}},{default:()=>{var p;return[(p=a.header)==null?void 0:p.call(a,E)]}}):l(ee,C({key:"header"},A,E,{onClick:i.value!=="month"?W:void 0}),{...a,default:void 0}),default:()=>l(J,null,[l(Z,C(_,{disabled:g.value,text:h.value,"onClick:next":D,"onClick:prev":M,"onClick:month":T,"onClick:year":Q}),null),l(Ee,{hideOnLeave:!0},{default:()=>[i.value==="months"?l(ae,C({key:"date-picker-months"},ge,{modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,min:o.value,max:f.value}),null):i.value==="year"?l(ne,C({key:"date-picker-years"},Ve,{modelValue:s.value,"onUpdate:modelValue":p=>s.value=p,min:o.value,max:f.value}),null):l(te,C({key:"date-picker-month"},R,{modelValue:c.value,"onUpdate:modelValue":p=>c.value=p,month:r.value,"onUpdate:month":p=>r.value=p,year:s.value,"onUpdate:year":p=>s.value=p,min:o.value,max:f.value}),null)]})]),actions:a.actions})}),{}}});const ut=e=>(Ge("data-v-44d2847d"),e=e(),Qe(),e),vt=ut(()=>ue("div",{class:"top-block"},null,-1)),mt={class:"outline-all"},kt={__name:"AppointmentView",setup(e){const{api:t}=ze(),u=Ue(),a=N([]),n=N();de(async()=>{var d,r;try{const{data:s}=await t.get("/appointments/date",{params:{date:new Date().toISOString().split("T")[0]}});a.value.push(...s.result),await ce(),tt.to(".appointment-card",{opacity:1,duration:.5})}catch(s){console.log(s);const P=((r=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";u({text:P,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});const k=()=>{const d=window.innerWidth;return d>=1200?"70%":d>=960?"80%":d>=600?"85%":"90%"},c=()=>{const d=window.innerWidth;return d>=1200?4:d>=960?3:d>=600?6:12},i=async()=>{try{const{data:d}=await t.get("/appointments/date/",{params:{date:n.value.getTime()}});a.value=d.result,console.log(d)}catch(d){console.log(d)}};return(d,r)=>(U(),K(J,null,[vt,ue("div",mt,[l(at,{class:"h-100 d-flex justify-center align-center",style:Fe({width:k()})},{default:b(()=>[l(nt,null,{default:b(()=>[l(X,{cols:"6"},{default:b(()=>[l(ct,{width:"100%",elevation:"0","first-day-of-week":1,"rounded-xl":"",modelValue:n.value,"onUpdate:modelValue":[r[0]||(r[0]=s=>n.value=s),i]},null,8,["modelValue"])]),_:1}),(U(!0),K(J,null,Je(a.value,s=>(U(),Ke(X,{key:s._id,cols:c()},{default:b(()=>[l(Xe,{class:"appointment-card"},{default:b(()=>[l(qe,null,{default:b(()=>[B(F(n.value.toLocaleDateString()),1)]),_:1}),l(Ze,null,{default:b(()=>[B(F(s.begin+" ~ "+s.end),1)]),_:2},1024),l(lt,{style:{"white-space":"pre"}},{default:b(()=>[B(F(s.info),1)]),_:2},1024),l(et,{class:"text-center justify-center"},{default:b(()=>[l(S,{color:"primary","prepend-icon":"mdi-cart",class:"w-100",onClick:d.addCart},{default:b(()=>[B("預約")]),_:1},8,["onClick"])]),_:1})]),_:2},1024)]),_:2},1032,["cols"]))),128))]),_:1})]),_:1},8,["style"])])],64))}},Dt=Le(kt,[["__scopeId","data-v-44d2847d"]]);export{Dt as default};
